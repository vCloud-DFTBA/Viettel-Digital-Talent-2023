
upstream logic_tier {
    server flask_1:5000 weight=7;
    server flask_2:5000 weight=3;
}
server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://logic_tier/;
    }
    location /v1 {
        proxy_pass http://flask_1:5000/;
    }
    location /v2 {
        proxy_pass http://flask_2:5000/;
    }
}