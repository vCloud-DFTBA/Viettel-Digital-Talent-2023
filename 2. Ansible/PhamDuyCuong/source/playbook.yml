- name: Install Docker
  hosts: all
  become: yes
  roles:
    - common

- name: Archive images into .tar for transfer to nodes
  hosts: host
  become: yes
  roles:
    - archive_images

- name: Load images and deloy three-tier web in node
  hosts: nodes
  become: yes
  roles:
    # Set up network for containers in nodes
    - set_up_network
    # Run containers and connect to the existing network
    - db
    - api
    - web
