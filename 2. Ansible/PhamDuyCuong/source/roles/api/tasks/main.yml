---
# tasks file for api
- name: copy tarball image to node
  copy:
    src: /tmp/{{image_name}}.tar
    dest: /root/{{image_name}}.tar

- name: load image from tarball
  community.docker.docker_image:
    name: "{{image_name}}"
    load_path: /root/{{image_name}}.tar
    state: present
    source: load
  
- name: Run Flask container
  community.docker.docker_container:
    name: backend
    image: "{{image_name}}"
    command: python server.py
    networks:
      - name: my-network
    state: started